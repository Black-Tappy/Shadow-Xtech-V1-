/*                                   
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
made by Black-Tappy
contact owner +254759000340

CURRENTLY RUNNING ON BETA VERSION!!
*
   * @project_name : Shadow-Xtech-V1 
   * @author : ·Ç™lêåÄ·è£kêåïêåÄ·Ç≤·Ç≤·ÉÑ
   * @youtube : https://www.youtube.com/@Black-Tappy
   * @infoription : Shadow-Xtech-V1 ,A Multi-functional whatsapp user bot.
   * @version 10 
*
   * Licensed under the  GPL-3.0 License;
* 
   * ‚îå‚î§Created By Black-Tappy tech info.
   * ¬© 2025 Shadow-Xtech-V1 ‚ú≠ ‚õ•.
   * plugin date : 16/5/2025
* 
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   * SOFTWARE.
*/



// s’∞Œ±’™÷Ö’° x‘µ“Ωc’∞ –≤œÉ—Ç ‚àÇ—îŒΩ—î‚ÑìœÉœÅ—î‚àÇ –≤—É ·Ç™lêåÄ·è£kêåïêåÄ·Ç≤·Ç≤·ÉÑ

import axios from "axios";

import config from "../../config.cjs";

const shortenUrl = async (m, sock) => {

  const prefix = config.PREFIX;

  const cmd = m.body.startsWith(prefix) ? m.body.slice(prefix.length).split(" ")[0].toLowerCase() : "";

  const validCommands = ["shortenurl","tinyurl","urlshortener", "shorten"];

  if (validCommands.includes(cmd)) {

    const url = m.body.split(" ")[1];

    if (!url) {

      return await sock.sendMessage(

        m.from,

        { text: "œÅ‚Ñì—îŒ±—ï—î œÅ—èœÉŒΩŒπ‚àÇ—î Œ± œÖ—è‚Ñì —ÇœÉ —ï–ΩœÉ—è—Ç—îŒ∑. —îœáŒ±–ºœÅ‚Ñì—î:!shortenurl https://github.com/joeljamestech/JOEL-XMD*" },

        { quoted: m }

      );

    }

    const apiUrl = `https://bk9.fun/tools/shorten?url=${encodeURIComponent(url)}`;

    try {

      await m.React("‚è≥"); // React with a loading icon

      const response = await axios.get(apiUrl);

      const data = response.data;

      if (data.status === true && data.BK9) {

        const originalUrl = data.BK9.origin;

        const shortenedUrl = data.BK9.url;

        const responseText = `*Íú± ú·¥Ä·¥Ö·¥è·¥°-x·¥õ·¥á·¥Ñ ú s ú·¥è Ä·¥õ·¥á…¥ ·¥ú Ä ü*\n\n*·¥è Ä…™…¢…™…¥·¥Ä ü ·¥ú Ä ü*: *${originalUrl}*\n*s ú·¥è Ä·¥õ·¥á…¥·¥á·¥Ö ·¥ú Ä ü:* *${shortenedUrl}\n\n _·¥õ·¥Ä·¥ò ·¥Ä…¥·¥Ö  ú·¥è ü·¥Ö ·¥è…¥ ·¥õ ú·¥á s ú·¥è Ä·¥õ·¥á…¥·¥á·¥Ö ·¥ú Ä ü ·¥õ·¥è ·¥Ñ·¥è·¥ò è …™·¥õ_\n\n*·¥ò·¥è·¥°·¥á Ä·¥á·¥Ö  ô è  ô ü·¥Ä·¥Ñ·¥ã-·¥õ·¥Ä·¥ò·¥ò è*`;

        await sock.sendMessage(

          m.from,

          {

            text: responseText,

            contextInfo: {

              isForwarded: false,

              forwardedNewsletterMessageInfo: {

                newsletterJid: "120363369453603973@newsletter",

                newsletterName: "Íú± ú·¥Ä·¥Ö·¥è·¥°-x·¥õ·¥á·¥Ñ ú",

                serverMessageId: -1,

              },

              forwardingScore: 999, // Score to indicate it has been forwarded

              externalAdReply: {

                title: "Íú± ú·¥Ä·¥Ö·¥è·¥°-x·¥õ·¥á·¥Ñ ú",

                body: "œÖ—è‚Ñì —ï–ΩœÉ—è—Ç—îŒ∑—î—è —ï—î—èŒΩŒπ¬¢e",

                thumbnailUrl: "https://files.catbox.moe/3hrxbh.jpg", // Add thumbnail URL if required

                sourceUrl: "https://whatsapp.com/channel/0029VasHgfG4tRrwjAUyTs10", // Source URL

                mediaType: 1,

                renderLargerThumbnail: false,

              },

            },

          },

          { quoted: m }

        );

      } else {

        throw new Error("Invalid response from the API");

      }

    } catch (error) {

      console.error("Error:", error); // Log the full error for debugging

      await sock.sendMessage(

        m.from,

        {

          text: `*·¥á Ä Ä·¥è Ä s ú·¥è Ä·¥õ·¥á…¥…™…¥…¢ ·¥ú Ä ü: ${error.message}*`,

          contextInfo: {

            externalAdReply: {

              title: "Íú± ú·¥Ä·¥Ö·¥è·¥°-x·¥õ·¥á·¥Ñ ú",

              body: "—ï–ΩœÉ—è—Ç œÖ—è‚Ñì —ï—î—èŒΩŒπ¬¢—î—ï",

              sourceUrl: "https://whatsapp.com/channel/0029VasHgfG4tRrwjAUyTs10",

              mediaType: 1,

            },

          },

        },

        { quoted: m }

      );

    }

  }

};

export default shortenUrl;
